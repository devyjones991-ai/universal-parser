# üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã - Universal Parser

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—Ä—É–ø–Ω–µ–π—à–∏–º–∏ —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏, –≤–∫–ª—é—á–∞—è Wildberries, Ozon, –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç, Avito, –ú.–í–∏–¥–µ–æ –∏ –≠–ª—å–¥–æ—Ä–∞–¥–æ.

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

### üõçÔ∏è Wildberries
- **URL:** https://www.wildberries.ru
- **–ú–µ—Ç–æ–¥:** API + HTML –ø–∞—Ä—Å–∏–Ω–≥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** 
  - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ø–æ–∏—Å–∫–∞
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ —Ü–µ–Ω–µ, –±—Ä–µ–Ω–¥—É, —Ä–µ–π—Ç–∏–Ω–≥—É
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–≤—Ü–µ –∏ –¥–æ—Å—Ç–∞–≤–∫–µ
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### üõí Ozon
- **URL:** https://www.ozon.ru
- **–ú–µ—Ç–æ–¥:** API + HTML –ø–∞—Ä—Å–∏–Ω–≥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –ü–æ–∏—Å–∫ –ø–æ API
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –±—Ä–µ–Ω–¥—ã
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–∏—á–∏–∏

### üîç –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç
- **URL:** https://market.yandex.ru
- **–ú–µ—Ç–æ–¥:** HTML –ø–∞—Ä—Å–∏–Ω–≥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
  - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
  - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö
  - –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã

### üì± Avito
- **URL:** https://www.avito.ru
- **–ú–µ—Ç–æ–¥:** HTML –ø–∞—Ä—Å–∏–Ω–≥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –ü–ª–æ—â–∞–¥–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω—É
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–≤—Ü–µ
  - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

### üì∫ –ú.–í–∏–¥–µ–æ
- **URL:** https://www.mvideo.ru
- **–ú–µ—Ç–æ–¥:** API
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ –±—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞
  - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–∞—Ä–∞–Ω—Ç–∏–∏
  - –î–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑

### üè™ –≠–ª—å–¥–æ—Ä–∞–¥–æ
- **URL:** https://www.eldorado.ru
- **–ú–µ—Ç–æ–¥:** API
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ –±—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞
  - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–∞—Ä–∞–Ω—Ç–∏–∏
  - –î–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
```http
GET /api/v1/russian-marketplaces/marketplaces
```

### –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
```http
GET /api/v1/russian-marketplaces/{marketplace}/search
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `query` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `price_min` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `price_max` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `brand` - –±—Ä–µ–Ω–¥
- `rating` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
- `discount` - —Ç–æ–ª—å–∫–æ —Å–æ —Å–∫–∏–¥–∫–æ–π
- `in_stock` - —Ç–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏
- `region` - —Ä–µ–≥–∏–æ–Ω (–¥–ª—è Avito)
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `condition` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–ª—è Avito)

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ
```http
GET /api/v1/russian-marketplaces/{marketplace}/product/{product_id}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
```http
GET /api/v1/russian-marketplaces/{marketplace}/categories
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```http
GET /api/v1/russian-marketplaces/{marketplace}/filters
```

### –ü–∞—Ä—Å–∏–Ω–≥ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
```http
POST /api/v1/russian-marketplaces/{marketplace}/parse
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "query": "iPhone 15",
  "page": 1,
  "filters": {
    "price_min": 50000,
    "price_max": 100000,
    "brand": "Apple"
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```http
GET /api/v1/russian-marketplaces/{marketplace}/stats
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Python
```python
import asyncio
from app.services.russian_marketplace_parsers import RussianMarketplaceService

async def main():
    service = RussianMarketplaceService()
    
    # –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ Wildberries
    products = await service.search_products(
        marketplace="wildberries",
        query="iPhone 15",
        page=1,
        filters={"price_min": 50000, "brand": "Apple"}
    )
    
    print(f"–ù–∞–π–¥–µ–Ω–æ {len(products)} —Ç–æ–≤–∞—Ä–æ–≤")
    for product in products:
        print(f"{product['title']} - {product['price']} ‚ÇΩ")

asyncio.run(main())
```

### HTTP –∑–∞–ø—Ä–æ—Å
```bash
curl -X GET "http://localhost:8000/api/v1/russian-marketplaces/wildberries/search?query=iPhone%2015&price_min=50000&brand=Apple"
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
```python
# –í app/core/config.py
RUSSIAN_MARKETPLACES = {
    "cache_ttl": 3600,  # –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "max_retries": 3,   # –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫
    "delay_min": 1,     # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    "delay_max": 3,     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    "use_proxy": False, # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏
    "rotate_headers": True  # –†–æ—Ç–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
}
```

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
–ö–∞–∂–¥—ã–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã:
- User-Agent —Ä–æ—Ç–∞—Ü–∏—è
- Accept-Language: ru-RU
- Referer –∏ Origin –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ Redis –Ω–∞ 1 —á–∞—Å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–ö–ª—é—á–∏ –∫—ç—à–∞:**
- `wildberries_search:{query}:{page}:{filters}` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
- `wildberries_product:{id}` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **400 Bad Request** - –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
- **404 Not Found** - —Ç–æ–≤–∞—Ä –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- **500 Internal Server Error** - –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—É
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
import logging

logger = logging.getLogger("russian_marketplaces")
logger.info(f"Searching {marketplace} for '{query}'")
logger.error(f"Failed to parse {marketplace}: {error}")
```

## –î–∞—à–±–æ—Ä–¥

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8501
```

**–§—É–Ω–∫—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞:**
- –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker
```bash
docker-compose up -d
```

### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ API
uvicorn app.main:app --host 0.0.0.0 --port 8000

# –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞
streamlit run dashboard/main.py --server.port 8501
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –†–æ—Ç–∞—Ü–∏—è User-Agent
- –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- –°–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
